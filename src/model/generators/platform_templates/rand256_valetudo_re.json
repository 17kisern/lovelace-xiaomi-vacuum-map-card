{
    "map_modes": {
        "defaultTemplates": [],
        "templates": {
            "vacuum_clean_segment": {
                "name": "map_mode.vacuum_clean_segment",
                "icon": "mdi:floor-plan",
                "selection_type": "ROOM",
                "repeats_type": "EXTERNAL",
                "max_repeats": 3,
                "service_call_schema": {
                    "service": "mqtt.publish",
                    "evaluate_data_as_template": true,
                    "service_data": {
                        "topic": "[[topic]]/custom_command",
                        "payload": "{ \"command\": \"segmented_cleanup\", \"segment_ids\": [[selection]], \"repeats\": [[repeats]], \"afterCleaning\": \"{{ 'Base' if 'afterCleaning' in '[[afterCleaning]]' else '[[afterCleaning]]'}}\" }"
                    }
                }
            },
            "vacuum_clean_zone_predefined": {
                "name": "map_mode.vacuum_clean_zone_predefined",
                "icon": "mdi:floor-plan",
                "selection_type": "ROOM",
                "repeats_type": "EXTERNAL",
                "max_repeats": 3,
                "service_call_schema": {
                    "service": "mqtt.publish",
                    "evaluate_data_as_template": true,
                    "service_data": {
                        "topic": "[[topic]]/custom_command",
                        "payload": "{\"command\": \"zoned_cleanup\",\"zone_ids\": [{%for s in ('[[selection]]')|from_json %}{ \"id\": \"{{s}}\", \"repeats\": [[repeats]]}{%if not loop.last%},{%endif%}{%endfor%}],\"afterCleaning\": \"{{ 'Base' if 'afterCleaning' in '[[afterCleaning]]' else '[[afterCleaning]]'}}\"}"
                    }
                }
            },
            "vacuum_goto_predefined": {
                "name": "map_mode.vacuum_goto_predefined",
                "icon": "mdi:map-marker",
                "max_selections": 1,
                "selection_type": "ROOM",
                "repeats_type": "NONE",
                "service_call_schema": {
                    "service": "mqtt.publish",
                    "service_data": {
                        "topic": "[[topic]]/custom_command",
                        "payload": "{ \"command\": \"go_to\", \"spot_id\": \"[[selection_unwrapped]]\" }"
                    }
                }
            }
        }
    },
    "tiles": {
        "from_attributes": [
            {
                "tile_id": "filter_left",
                "attribute": "filter",
                "label": "tile.filter_left.label",
                "icon": "mdi:air-filter",
                "unit": "unit.hour_shortcut"
            },
            {
                "tile_id": "main_brush_left",
                "attribute": "mainBrush",
                "label": "tile.main_brush_left.label",
                "icon": "mdi:brush",
                "unit": "unit.hour_shortcut"
            },
            {
                "tile_id": "side_brush_left",
                "attribute": "sideBrush",
                "label": "tile.side_brush_left.label",
                "icon": "mdi:brush",
                "unit": "unit.hour_shortcut"
            }
        ]
    }
}
